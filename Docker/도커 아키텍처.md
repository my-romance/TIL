# 도커 아키텍처

### 도커 아키텍처

<img src="https://camo.githubusercontent.com/05c83871e6821f36653540156ec459eaa3d45359/68747470733a2f2f646f63732e646f636b65722e636f6d2f656e67696e652f696d616765732f6172636869746563747572652e737667" align="left" style="zoom:80%;" />





### 도커 엔진

- 우리가 흔히 말하는 도커는 일반적으로 도커 엔진을 의미. 

- 도커를 설치하고 실행하면 `dockerd`(도커 데몬) 라는 데몬 프로그램이 서버로서 실행되며, REST API, CLI 도구들이 클라이언트가 되어서 **도커 데몬(`dockerd`)에게 작업 제시**

  <img src="https://camo.githubusercontent.com/d130ccb73561faf2614657672d6b817828149b00/68747470733a2f2f646f63732e646f636b65722e636f6d2f656e67696e652f696d616765732f656e67696e652d636f6d706f6e656e74732d666c6f772e706e67" align="left" />

  

  ### 도커 데몬

  - 도커 데몬 `dockerd`은 도커 API 요청을 수신하고 이미지, 컨테이너, 네트워크 및 볼륨과 같은 도커 객체를 관리
  - 데몬은 도커 서비스를 관리하게 위해 다른 데몬과 통신 가능

  

  ### 도커 클라이언트

  - 도커 클라이언트(`docker`)는 많은 도커 사용자가 Docker와 상호 작용하는 주요 방법
  - `docker run`과 같은 명령을 사용하면 클라이언트가 이 명령을 전송하여 `dockerd`를 수행
  - 이 `docker` 명령은 도커 API를 사용
  - 도커 클라이언트는 둘 이상의 데몬과 통신 가능

  

  ### 도커 레지스트리

  - 도커 레지스트리는 도커 이미지를 저장
    - 공용 레지스트리(도커 허브) : 누구나 사용할 수 있는 공용 레지스트리. 도커는 기본적으로 도커 오브에서 이미지를 찾도록 구성됨
    - 개인 레지스트리
  - **도커 레지스트리 VS 도커 레파지토리**
    - 도커 레지스트리(Docker Resitry) : 도커 이미지를 저장하는 서비스. 예를 들어 도커 허브, Quay, ECR 등 실제 이미지를 저장하고 관리하는 서비스
    - 도커 레파지토리(Docker Repository) : 이름이 같지만 태그가 다른 도커 이미지의 논리적인 모음. (Namespace)

  

  ### 도커 오브젝트

  도커 이미지와 도커 컨테이너로 나뉜다.

  - 도커 이미지 : 도커 컨테이너를 만들기 위한(실행하기 위한) 읽기 전용 템플릿.

    - 도커 이미지 구성요소

      ```shell
      # 일반 이미지
      {REPOSITORY_NAME}/{IMAGE_NAME}:{IMAGE_TAG}
      
      # 도커 허브 공식 이미지
      {IMAGE_NAME}:{IMAGE_TAG}
      
      ```

      

      - repository name : 이미지가 저장된 장소를 의미함. 레파지토리 이름이 명시되지 않은 경우에는 도커 허브의 공식 이미지를 뚯함.
      - image name : 도커 이미지 이름
      - image tag : 도커 이미지의 버전 및 수정 관리에 사용됨. 생략할 시 latest 태그로 인식됨

  - 도커 컨테이너 : 도커 이미지의 실행가능한 인스턴스

    - 컨테이너를 생성하게 되면 해당 이미지의 이미지에서 정희한 파일 시스템과 파일들, 그리고 격리된 시스템 자원 및 네트워크를 사용할 수 있는 독립적인 공간 생성됨
    - 컨테이너는 이미지를 읽기 전용으로 사용하되, 이미지에서 변경된 사항만 컨테이너 계층에 저장하므로 컨테이너에서의 변경은 이미지에 영향을 주지 않음.

  

### 참조 문서

- https://www.reimaginer.me/entry/docker-hands-on-part1#recentEntries